{"componentChunkName":"component---src-templates-post-list-template-tsx","path":"/category/sql/page/3","result":{"data":{"site":{"meta":{"title":"Raw SAS - SAS Tips n Tricks","description":"Tips n Tricks and other SAS Titbits from around 10 years of SAS projects and tinkering about with SAS"}},"remark":{"posts":[{"post":{"html":"<p>Occasionally when debugging it can be useful to run as a system account for checking permissions etc.<br /><br />A useful utility for this (in windows) is the “runas” command.  For instance (from the command window):<br /><br /><span style=\"font-family: Courier New, Courier, monospace;\">runas /user:“YourDomainsassrv” “C:Program FilesSASEnterpriseGuide4.3SEGuide.exe”</span><br /><br />or<br /><span style=\"font-family: Courier New, Courier, monospace;\"><br /></span><span style=\"font-family: Courier New, Courier, monospace;\">runas /user:”</span><span style=\"font-family: 'Courier New', Courier, monospace;\">YourDomain</span><span style=\"font-family: Courier New, Courier, monospace;\">sassrv” “C:Program Files (x86)Microsoft SQL Server120ToolsBinnManagementStudioSsms.exe”</span><br /><br />You will be prompted for the password before the client tool opens on your machine.<br /><br /><i>This post was inspired by the fact that one should not log into the application server as sassrv, to avoid conflicting / hung sessions in the STP server, but I can’t find the SAS note to back this up!  However those hung sessions were confirmed real.. </i> <b>Don’t log into sasapp as sassrv.</b></p>","frontmatter":{"title":"Running EG or other client tools as SASSRV","path":"/running-eg-or-other-client-tools-as-sassrv/","previewImg":null,"tags":["SQL"],"date":"Dec 18, 2015"}}},{"post":{"html":"<p>This one had me puzzled for a bit (SAS 9.2, Windows 2008, SQLNCLI10.1, OLEDB):<br /><br /><div style=\"margin-bottom: 0.0001pt;\"><span style=\"background: white; color: teal; font-family: &quot;Courier New&quot;;\">WARNING: The current setting of the DIRECT<em>EXE libname option will not allow this SQL statement to be passed directly to the DBMS for processing.</span></div><br />Explicitly setting the DIRECT</em>EXE option to DELETE had no effect.  Assigning the library in a new session, and performing the update also worked fine.  Thankfully the SYSCC variable was not affected, so jobs / processes continued to run, but still…<br /><br />Anyways, it turned out this was actually caused by the SASTRACE option!  Turning this OFF removed the warning.</p>","frontmatter":{"title":"DIRECT_EXE warning","path":"/direct_exe-warning/","previewImg":null,"tags":["SQL"],"date":"Oct 13, 2015"}}},{"post":{"html":"<p>Having seemingly brought down our 9.2 Windows 2008 STP server (only in DEV!!) during development of a yet another (awesome) STP web app, it occurred to me that more information was needed about just how many requests were being batted over.<br /><hr /><br /><div style=\"color: red; font-family: 'trebuchet ms', arial, 'arial unicode ms', sans-serif; font-weight: bold;\"><img align=\"absmiddle\" alt=\"Error\" border=\"0\" src=\"http://dev-sasmidtier.partnershipassurance.int:8080/SASTheme_Partnership_Green/themes/Partnership_Green/images/MessageError24.gif\" height=\"24\" title=\"Error\" width=\"24\"> Stored Process Error</div><div style=\"font-family: 'trebuchet ms', arial, 'arial unicode ms', sans-serif; font-size: small;\"><img alt src=\"http://dev-sasmidtier.partnershipassurance.int:8080/SASTheme_Partnership_Green/themes/Partnership_Green/images/spacer.gif\" height=\"10\" title><br /><h2 style=\"font-size: medium;\">Unable to execute stored process.</h2><h2 style=\"font-size: medium;\">The server is not running (paused/deferred stop mode?).</h2></div><hr /><br />So, inspired by Quentin McMullen’s <a href=\"http://bi-notes.com/2014/02/sas_stored_process_log/\">excellent post</a>, I wanted to share my approach. <br /><br /><b>Step 1</b> was to create a table to log the events.  This was structured as follows:<br /><br /><span style=\"font-family: Courier New, Courier, monospace;\">     CREATE TABLE [dbo].[STP_LOGGER](</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">          [PROCESSED_DTTM] <a href=\"3\">datetime2</a> NOT NULL,</span><br /><span style=\"font-family: Courier New, Courier, monospace;\"><span style=\"white-space: pre;\"> </span>         [STATUS_CD] <a href=\"8\">char</a> NOT NULL,</span><br /><span style=\"font-family: Courier New, Courier, monospace;\"><span style=\"white-space: pre;\"> </span>         [_PROGRAM] [char] (500) NOT NULL,</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">          [_METAPERSON] [char] (100) NOT NULL,</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">          [SYSJOBID] [char] (12) NOT NULL,</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">          [_SESSIONID] [char] (50) NULL,</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">          [GLOB_VARS] [char] (2000) NULL</span><br /><br />Note that this table was not a SAS table (which could be subject to locking).  If you have no other choice but to use a SAS table, please refer to the previous post for attempting SAS locks (noting that this can <a href=\"http://rawsas.blogspot.co.uk/2015/03/get-physical-path-from-metadata-libref.html\">not be done via the meta engin</a>e).<br /><br /><br /><b>Step 2</b> was to create a <a href=\"https://github.com/sashub/macro/blob/master/standalone/stp_logger.sas\">macro</a> to update the table (to be placed somewhere in <a href=\"http://support.sas.com/documentation/cdl/en/hostwin/63285/HTML/default/viewer.htm#win-sysop-sasautos.htm\">SASAUTOS</a>).  Example below:<br /><br /><span style=\"font-family: Courier New, Courier, monospace;\">%macro stp<em>logger(status<em>cd= </span><span style=\"font-family: 'Courier New', Courier, monospace;\">);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">  %local global</em>vars;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">  proc sql noprint;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">  select cats(name,’=‘,value)</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    into: global_vars</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    separated by ’|’</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    from  dictionary.macros</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    where scope = ‘GLOBAL’</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      and substr(name,1,3) not in(‘SYS’, ‘SQL’,‘SAS’)</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      and substr(name,1,1) ne ’</em>‘;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\"><br /></span><span style=\"font-family: Courier New, Courier, monospace;\">  %assign<em>lib(libref=web);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">  proc datasets library=work; delete append; run;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">  data append /view=append;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    if 0 then set web.stp<em>logger;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    PROCESSED</em>DTTM=%sysfunc(datetime());</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    STATUS<em>CD=”&#x26;status</em>cd”;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    _PROGRAM=”&#x26;_program”;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    _METAPERSON=”&#x26;_metaperson”;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    SYSJOBID=”&#x26;sysjobid”;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">  %if not %symexist(_SESSIONID) %then %do;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    /</em> session id is stored in the replay variable but needs to be extracted <em>/</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    \\</em>replay=symget(’_replay’);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    _replay=subpad(_replay,index(_replay,’_sessionid=’)+11,length(_replay));</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    index=index(_replay,’&#x26;’)-1;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    if index=-1 then index=length(_replay);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    _replay=substr(_replay,1,index);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    _SESSIONID=_replay;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    drop _replay index;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">  %end;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">  %else %do;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    /_ explicitly created sessions are automatically available <em>/</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    \\</em>SESSIONID=symget(’_SESSIONID’);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">  %end;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    GLOB<em>VARS=symget(‘global</em>vars’);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    output;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">    stop;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">  run;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\"><br /></span><span style=\"font-family: Courier New, Courier, monospace;\">  proc append base=web.stp<em>logger data=append;run;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">  proc sql; drop view append;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\"><br /></span><span style=\"font-family: Courier New, Courier, monospace;\">%mend stp</em>logger;</span><br /><br /><b>Step 3</b> was to call the macro.   The quick / dirty way would be to simply include it in the SAS programs directly, but that quickly becomes unmanageable when dealing with a large number of STPs.  Another option is to include in the autoexec, but that will only deal with program ENTRY (not exit).<br />The best approach, as endorsed by <a href=\"http://bi-notes.com/2014/02/sas_stored_process_log/#comment-1955\">Don Henderson</a>, is to use the STP init and term programs.  These are straightforward .sas programs that run on an STP session’s entry and exit.  Configuration is simple, and explained here:  <a href=\"http://support.sas.com/kb/39/250.html\">http://support.sas.com/kb/39/250.html</a>.  This approach is fantastic as it will ensure that ALL calls to the STP server are logged (eg via EG, AMO, WRS, every custom web app, etc etc).   Simply add the following one-liners to each file:<br /><br /><span style=\"font-family: Courier New, Courier, monospace;\">%stp<em>logger(status</em>cd=SrvEnter)  /_ goes in the init file <em>/</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">%stp</em>logger(status<em>cd=SrvExit)   /</em> goes in the term file _/</span><br /><br />Boom, we are done, and here is an extract of the new logging table:<br /><br /><div style=\"clear: both; text-align: center;\"><a href=\"/tetrahex-rawsas/45e987897554f08dfd95c1478cca7024/Capture_4.png\" style=\"margin-left: 1em; margin-right: 1em;\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; margin-bottom: 1.0725rem;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 43.61702127659575%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABo0lEQVQozyWRiY6jMAyGef/3ml3aaRmuUii57BAgEIYrTK/talOtFVlO8n+/LNs7Hn5Fwe6cHIHleXIIA/8c7fNzRPKEkYwVSZnH5JIe9h9x9NkqBiQjlyT82vn7Dw9QutMb83q9BBdad6qS1+t9We3z+ZznpShLLlAAEkLX1TolF8ABEMBDBIkwmP71fCBnfacbhdefbZnnx/22zBNjVKnKySgp7bp+j0OlEKXzI150yuO0uFDRDXMYZwXhWVao1oDSrZmgao5RGqV5mGTHMJW1LjlE6TnO8uRcen6Q7INTeCqF6v3P2BWHMCXQZBdBsc2p/H2IdkHqB7F/TEpRJzl1iLvuvxLPtdTWavwe/r7+1AjjYLpG/W/YZWtXBF5JbOoKgNvVPQ9Soqplp1uPCyGl1FrfbncQUNeNG4G1mzHG5XEcS0KEEIwLxtiyLK1uHcIFr+o3zEG4IevH4+H+27qtELbtZzBm2zanZpRyR1J2KYp5no3pHfKmENyqUCJ2XXe73ZxLp3WtpLXWDINd7TRNlFJwgcgYn+a577s3UklZVf8AkH/dmNCP2r4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Capture 5\" title=\"Capture 5\" src=\"/tetrahex-rawsas/static/43eeb70ea7b18f145338024ee93bd933/6af66/Capture_5.png\" srcset=\"/tetrahex-rawsas/static/43eeb70ea7b18f145338024ee93bd933/4dcb9/Capture_5.png 188w,\n/tetrahex-rawsas/static/43eeb70ea7b18f145338024ee93bd933/5ff7e/Capture_5.png 375w,\n/tetrahex-rawsas/static/43eeb70ea7b18f145338024ee93bd933/6af66/Capture_5.png 640w\" sizes=\"(max-width: 640px) 100vw, 640px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></a></div><br /><br />See that highlighted row?  A hung session with my name against it…<br /><br /><div style=\"clear: both; text-align: center;\"><a href=\"../images/2010-02-24-hangman.jpg\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" height=\"289\" src=\"http://1.bp.blogspot.com/-iq3rv-RygCQ/VenmQacknMI/AAAAAAAAAlw/uz0v7PUwxQU/s320/2010-02-24-hangman.jpg\" width=\"320\"></a></div><br /><br /><br />EDIT 13OCT2015:<i> The connection issue was finally resolved by setting the <a href=\"http://support.sas.com/rnd/itech/doc9/admin_oma/sasserver/iombridge/sp_sercl.html#sasRecycleActivationLimit\">Recycle Activation Limit</a> to 1.  This had no noticeable effect on performance.</i><br /><br /><br /><br /></p>","frontmatter":{"title":"Event Logging of Stored Process Server Sessions","path":"/event-logging-of-stored-process-server-sessions/","previewImg":null,"tags":["SQL"],"date":"Sep 04, 2015"}}},{"post":{"html":"<p>So it turns out that it is not possible to place a SAS lock on a table referenced via the Metadata Libname Engine:<br /><br /><span style=\"font-family: Courier New, Courier, monospace;\">WARNING: LOCK is not supported in MLE.</span><br /><br />To circumvent this issue, one approach is to assign a libref directly. The following macro takes a libref (placed in the lib= keyword parameter) and queries the metadata for a physical path (placed in macro variable specified in the outvar= keyword parameter).<br /><br />Note that not all librefs have an underlying directory (eg database tables).<br /><br /><span style=\"font-family: Courier New, Courier, monospace;\">%macro get<em>path<em>from</em>metalibref(lib=,outvar=filepath);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">   data _null</em>;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      putlog “NOTE: Getting physical path for &#x26;lib library”;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      length lib<em>uri up<em>uri filepath $256;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      call missing (of \\</em>all</em>);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      /_ get URI for the particular library <em>/</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      rc1=metadata</em>getnobj(“omsobj:SASLibrary?@Libref =’&#x26;lib’“,1,lib<em>uri);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      put rc1= lib</em>uri= ;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      /_ get first object of the UsingPackages association (assumed to be Path) <em>/</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      rc2=metadata</em>getnasn(lib<em>uri,‘UsingPackages’,1,up</em>uri);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      put rc2= up<em>uri= ;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      /</em> get the DirectoryName attribute of the previous object <em>/</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      rc3=metadata</em>getattr(up_uri,‘DirectoryName’,filepath);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      put rc3= filepath=;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">      call symputx(”&#x26;outvar”,filepath,‘g’);</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">   run;</span><br /><span style=\"font-family: Courier New, Courier, monospace;\">%mend;</span><div data-bid=\"11a492c4-afd5-4c83-9bcc-d304573e1386\" data-u></div></p>","frontmatter":{"title":"Get Physical Path From Metadata Libref","path":"/get-physical-path-from-metadata-libref/","previewImg":null,"tags":["SQL"],"date":"Mar 17, 2015"}}},{"post":{"html":"<p>Make your metadata queries more versatile by checking for multiple conditions in a single pass!  When using the OR condition, remember to prefix subequent attributes with the @ symbol.  See below for testing whether a Stored Process user is in a certain set of groups:<br /><br /><div style=\"margin-bottom: 0.0001pt;\"><span style=\"background: white; color: blue; font-family: &quot;Courier New&quot;;\">%let</span><span style=\"background: white; font-family: 'Courier New';\"> <em>MetaPerson=John Smith;</span></div><div style=\"margin-bottom: 0.0001pt;\"><br /></div><div style=\"margin-bottom: 0.0001pt;\"><b><span style=\"background: white; color: navy; font-family: &quot;Courier New&quot;;\">data</span></b><span style=\"background: white; font-family: 'Courier New';\"> </span><span style=\"background: white; color: blue; font-family: &quot;Courier New&quot;;\">\\</em>null<em></span><span style=\"background: white; font-family: 'Courier New';\">;</span></div><div style=\"margin-bottom: 0.0001pt;\"><span style=\"background: white; font-family: 'Courier New';\">   </span><span style=\"background: white; color: blue; font-family: &quot;Courier New&quot;;\">length</span><span style=\"background: white; font-family: 'Courier New';\"> obj type $</span><b><span style=\"background: white; color: teal; font-family: &quot;Courier New&quot;;\">256</span></b><span style=\"background: white; font-family: 'Courier New';\"> id $</span><b><span style=\"background: white; color: teal; font-family: &quot;Courier New&quot;;\">20</span></b><span style=\"background: white; font-family: 'Courier New';\">;</span></div><div style=\"margin-bottom: 0.0001pt;\"><span style=\"background: white; font-family: 'Courier New';\">   obj=</span><span style=\"background: white; color: purple; font-family: &quot;Courier New&quot;;\">“omsobj:IdentityGroup?IdentityGroup[”</span><span style=\"background: white; font-family: 'Courier New';\">!!</span></div><div style=\"margin-bottom: 0.0001pt;\"><span style=\"background: white; font-family: 'Courier New';\">      </span><span style=\"background: white; color: purple; font-family: &quot;Courier New&quot;;\">“@Name=‘SASAdministrators’ or @Name=‘ETL Developers’]”</span><span style=\"background: white; font-family: 'Courier New';\">!!</span></div><div style=\"margin-bottom: 0.0001pt;\"><span style=\"background: white; font-family: 'Courier New';\">      </span><span style=\"background: white; color: purple; font-family: &quot;Courier New&quot;;\">“[MemberIdentities/Person[@Name=‘”</span><span style=\"background: white; font-family: 'Courier New';\">||</span><span style=\"background: white; color: purple; font-family: &quot;Courier New&quot;;\">”&#x26;</em>METAPERSON”</span><span style=\"background: white; font-family: 'Courier New';\">||</span><span style=\"background: white; color: purple; font-family: &quot;Courier New&quot;;\">”’]]”</span><span style=\"background: white; font-family: 'Courier New';\">;</span></div><div style=\"margin-bottom: 0.0001pt;\"><span style=\"background: white; font-family: 'Courier New';\">   rc=metadata<em>resolve(obj,type,id);</span></div><div style=\"margin-bottom: 0.0001pt;\"><span style=\"background: white; font-family: 'Courier New';\">   </span><span style=\"background: white; color: blue; font-family: &quot;Courier New&quot;;\">if</span><span style=\"background: white; font-family: 'Courier New';\"> (rc) </span><span style=\"background: white; color: blue; font-family: &quot;Courier New&quot;;\">then</span><span style=\"background: white; font-family: 'Courier New';\"> </span><span style=\"background: white; color: blue; font-family: &quot;Courier New&quot;;\">Call</span><span style=\"background: white; font-family: 'Courier New';\"> symputx(</span><span style=\"background: white; color: purple; font-family: &quot;Courier New&quot;;\">‘Isamemberc’</span><span style=\"background: white; font-family: 'Courier New';\">,</span><span style=\"background: white; color: purple; font-family: &quot;Courier New&quot;;\">‘Yes’</span><span style=\"background: white; font-family: 'Courier New';\">);</span></div><div style=\"margin-bottom: 0.0001pt;\"><span style=\"background: white; font-family: 'Courier New';\">   </span><span style=\"background: white; color: blue; font-family: &quot;Courier New&quot;;\">else</span><span style=\"background: white; font-family: 'Courier New';\"> Call symputx(</span><span style=\"background: white; color: purple; font-family: &quot;Courier New&quot;;\">‘Isamemberc’</span><span style=\"background: white; font-family: 'Courier New';\">,</span><span style=\"background: white; color: purple; font-family: &quot;Courier New&quot;;\">‘No’</span><span style=\"background: white; font-family: 'Courier New';\">);</span></div><div style=\"margin-bottom: 0.0001pt;\"><b><span style=\"background: white; color: navy; font-family: &quot;Courier New&quot;;\">run</span></b><span style=\"background: white; font-family: 'Courier New';\">;</span></div><br /><div><span style=\"background: white; color: blue; font-family: &quot;Courier New&quot;;\">%put</span><span style=\"background: white; font-family: 'Courier New';\"> “Is &#x26;\\</em>MetaPerson in groups ETL developer or SAS Administrator??“;</span></div><div><span style=\"background: white; font-family: 'Courier New';\"><span style=\"background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; color: blue;\">%put</span><span style=\"background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial;\"> </span>”&#x26;Isamemberc”;</span></div></p>","frontmatter":{"title":"Use OR condition in metadata OMSOBJ query","path":"/use-or-condition-in-metadata-omsobj-query/","previewImg":null,"tags":["SQL"],"date":"Jan 23, 2015"}}},{"post":{"html":"<p>In building a script to read in the LSF log files (lsb.events files), it was apparent that the file structure has changed across LSF versions.  What is not so apparent is where the documentation resides..  So here’s  a quick ref guide.<br /><br />First though, you need to know your LSF version (different to the Process Manager version!).  Simply open a shell / command prompt on the server machine and type “lsid”.  For Process Manager version, it would be “jid” (then log on).<br /><br />Once you have the LSF version (lsid), see below:<br /></p>\n<ul>\n  <li>Online:</li>\n  <ul>\n    <li><a href=\"http://www.ccs.miami.edu/hpc/lsf/7.0.6/\">Version 7</a> (<a href=\"http://www.ccs.miami.edu/hpc/lsf/7.0.6/schema/lsb_events.htm\">here </a>for lsb.events)</li>\n    <li><a href=\"http://www.slac.stanford.edu/comp/unix/package/lsf/LSF8.1_doc/8.0/\">Version 8</a> (<a href=\"http://www.slac.stanford.edu/comp/unix/package/lsf/LSF8.1_doc/8.0/lsf_config_ref/index.htm?lsb.events.5.html?zoom_highlight=Event%2BTime~main\">here </a>for lsb.events)</li>\n    <li><a href=\"http://www.ccs.miami.edu/hpc/lsf/9.1.1/\">Version 9</a>&nbsp;(<a href=\"http://www.ccs.miami.edu/hpc/lsf/9.1.1/lsf_config_ref/index.htm?lsb.events.5.html~main\">here </a>for lsb.events)</li>\n  </ul>\n  <li>Local:</li>\n  <ul>\n    <li>&lt;LSF_INSTALL_DIR&gt;/&lt;LSF_VERSION&gt;/include/lsf</li>\n  </ul>\n  <li><a href=\"http://www.cs.huji.ac.il/labs/parallel/workload/l_lanl_o2k/lsf2swf.pl\">Further info</a></li>\n</ul>\n<div>Remember to take a copy of the lsb.events file before reading, as the file will normally be locked.. &nbsp;(and the lsb.events.n file may be about to change)</div>","frontmatter":{"title":"Platform Computing - LSF documentation","path":"/platform-computing-lsf-documentation/","previewImg":null,"tags":["SQL"],"date":"Jan 09, 2015"}}},{"post":{"html":"<p>Sample code (and tips) for applying SAS Formats to data before pulling into excel:<br /><br /><pre><span style=\"color: maroon; font-weight: bold;\">Dim</span> obConnection <span style=\"color: maroon; font-weight: bold;\">As</span> <span style=\"color: maroon; font-weight: bold;\">New</span> ADODB<span style=\"color: #008c00;\">.</span>Connection<br /><span style=\"color: maroon; font-weight: bold;\">Dim</span> obRecordSet <span style=\"color: maroon; font-weight: bold;\">As</span> <span style=\"color: maroon; font-weight: bold;\">New</span> ADODB<span style=\"color: #008c00;\">.</span>Recordset<br /><br /><span style=\"color: dimgrey;\">‘workspace (ws) object previously defined</span><br />obConnection<span style=\"color: #008c00;\">.</span><span style=\"color: maroon; font-weight: bold;\">Open</span> <span style=\"color: #0000e6;\">“provider=sas.iomprovider.1; Data Source=iom-id://”</span> <span style=\"color: #808030;\">+</span> ws<span style=\"color: #008c00;\">.</span>UniqueIdentifier<br /> <br /><span style=\"color: dimgrey;\">‘need to set the connection before the format property can be applied</span><br />obRecordSet<span style=\"color: #008c00;\">.</span>ActiveConnection <span style=\"color: #808030;\">=</span> obConnection<br /> <br /><span style=\"color: dimgrey;\">‘use “+<em>ALL</em>” to get both formatted AND unformatted values</span><br />obRecordSet<span style=\"color: #008c00;\">.</span>Properties<span style=\"color: #808030;\">(</span><span style=\"color: #0000e6;\">“SAS Formats”</span><span style=\"color: #808030;\">)</span> <span style=\"color: #808030;\">=</span> <span style=\"color: #0000e6;\">”<em>ALL</em>”</span><br /> <br /><span style=\"color: dimgrey;\">’ the second parameter below has to be EMPTY</span><br />obRecordSet<span style=\"color: #008c00;\">.</span><span style=\"color: maroon; font-weight: bold;\">Open</span> sasTable<span style=\"color: #808030;\">,</span> <span style=\"color: #808030;\">,</span> adOpenStatic<span style=\"color: #808030;\">,</span> adLockReadOnly<span style=\"color: #808030;\">,</span> ADODB<span style=\"color: #008c00;\">.</span>adCmdTableDirect<br /></pre></p>","frontmatter":{"title":"VBA and SAS IOM - applying formats","path":"/vba-and-sas-iom-applying-formats/","previewImg":null,"tags":["SQL"],"date":"Dec 29, 2014"}}},{"post":{"html":"<p>You can speed up the performance of your DI Studio client by increasing memory via the JavaArgs_1 variable in the distudio.ini file.  A suggested approach is to increase from -Xmx512m to -Xmx1024m.<br /><br /></p>\n<div style=\"clear: both; text-align: center;\">\n  <a href=\"/tetrahex-rawsas/bb3a764a78d43c47ead9bf9f54cc78af/DI_MemSize.png\" style=\"margin-left: 1em; margin-right: 1em;\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 423px; margin-bottom: 1.0725rem;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 59.57446808510638%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACJ0lEQVQoz1WQ646bMBCFef9H6kpdSNrdAAESEjABY8MGMOZm7iHZBOps90c7Ojr6NPbRaEaw4+T94G6OnuKE7w6UT564B+LOerPd7QnucKC4vO9vIVbcwHEACkLD8Q0boIQKACbGER9AaByg7SUmwDYkOxvrB3gEgWm5mulYbmRaaG+hE4yPNgKQHEFoe0SIaYJ8oO+haQXknBAc8gxwiQuSI64dGxo4Uiz7aEfSxhRNsvNyyz97pxS4SHhT96qqKZouG+aLBre6rmqarBoHY+vqoqO8wN0qDM9pxhKSx6QgtCK0JGmZZaUgq5qqyvq7pb3h1e/EkD1949nAc4MUQswnck9pWRRNXtRF2eR5zYErpZVw/jjTjCJA0aH0DBI4VY76pr0UOcuLljWXivVZ1sRxRjPGVVUdzydpNV0fAkaIkJQ1bJy6bmj6sf289NM0NXXDGBv6fhj6tm2HvuPOO/0T+GPzePBw+JFDtz6x5LRkcGbp0o2Ptrt3w2MY52FcLtdlun77dPuC25OHyyKgICjiOAYeRjGGYRlRvkiAQ9/HQfhRlGyel/udj5nvXPf5H+BhjAtCKOJXoXz5uiyX+yf/fL1eb7fbzKP/1fyl7xJwEJQpBVv1pyhKorRerRVRXEvSy8uP11epqqZxXIZ+GYalH5Ynj0/+K8FHqCCppSqvorSSpJ2mW5vNav1Llje6vvNhStMuilgc1WnaY0SfW0YsimqStH8AocuBXuB3jWkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"DI MemSize\" title=\"DI MemSize\" src=\"/tetrahex-rawsas/static/bb3a764a78d43c47ead9bf9f54cc78af/f687d/DI_MemSize.png\" srcset=\"/tetrahex-rawsas/static/bb3a764a78d43c47ead9bf9f54cc78af/4dcb9/DI_MemSize.png 188w,\n/tetrahex-rawsas/static/bb3a764a78d43c47ead9bf9f54cc78af/5ff7e/DI_MemSize.png 375w,\n/tetrahex-rawsas/static/bb3a764a78d43c47ead9bf9f54cc78af/f687d/DI_MemSize.png 423w\" sizes=\"(max-width: 423px) 100vw, 423px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n  </a>\n</div>\n<div style=\"clear: both; text-align: center;\"><br></div>\n<div style=\"clear: both; text-align: left;\">\n  This is further documented in usage note <a href=\"http://support.sas.com/kb/41/571.html\">41571</a>. &#xA0;A similar update can be made to SMC (useful when importing / exporting large packages).\n</div>\n<br>\nNote that the max memory that will go in JavaArgs is typcially 1536.","frontmatter":{"title":"Improve performance of DI Studio client","path":"/improve-performance-of-di-studio-client/","previewImg":null,"tags":["SQL"],"date":"Dec 16, 2014"}}},{"post":{"html":"<h2>Debugging Stored Processes</h2><div>One challenge that developers have when working with stored processes, is access to the work library. &nbsp;Whilst sessions can be configured to persist, this does not help if you want to view a snapshot of your datasets at a particular point in the process. &nbsp; The following snippet may help in this regard:</div><div><br /></div><div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #0433ff;\">libname</span> twork <span style=\"color: #942193;\">\"&amp;tloc\"</span>;</div><div style=\"color: #011993; font-family: 'Courier New'; font-size: 10px;\"><b>proc</b><span style=\"color: black;\"> </span><b>datasets</b><span style=\"color: black;\"> </span><span style=\"color: #0433ff;\">lib</span><span style=\"color: black;\">=twork </span><span style=\"color: #0433ff;\">kill</span><span style=\"color: black;\">;&nbsp;</span></div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #011993;\"><b>proc</b></span> <span style=\"color: #011993;\"><b>copy</b></span> inlib=work <span style=\"color: #0433ff;\">outlib</span>=twork;</div><div style=\"color: #0433ff; font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #011993;\"><b>data</b></span><span style=\"color: black;\"> </span>_Null_<span style=\"color: black;\">;</span></div><div style=\"color: #942193; font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #0433ff;\">file</span><span style=\"color: black;\"> </span>\"&amp;tloc/macros.txt\"<span style=\"color: black;\">;</span></div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #0433ff;\">set</span> sashelp.vmacro;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #0433ff;\">put</span> name <span style=\"color: #942193;\">'='</span> value;</div><br /><div style=\"color: #0433ff; font-family: 'Courier New'; font-size: 10px;\">run<span style=\"color: black;\">;</span></div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #0433ff;\">libname</span><span style=\"color: black;\">&nbsp;twork clear</span><span style=\"color: black;\">;</span></div></div>","frontmatter":{"title":"Debugging Stored Processes","path":"/debugging-stored-processes/","previewImg":null,"tags":["SQL"],"date":"Nov 08, 2013"}}},{"post":{"html":"<p>Who cares about labels anyway?!!<br /><br />Ok, first select explorer in base sas, then tools / options / explorer:<br /><br /><div style=\"clear: both; text-align: center;\"><a href=\"../images/Screen+Shot+2013-08-29+at+15.00.31.png\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" height=\"264\" src=\"http://1.bp.blogspot.com/-tJzDjWP1LJM/Uh9UMGgIrHI/AAAAAAAAAX0/5z9yiGiPEQk/s320/Screen+Shot+2013-08-29+at+15.00.31.png\" width=\"320\"></a></div><br />Select the members tab, and double click TABLE<br /><br /><div style=\"clear: both; text-align: center;\"><a href=\"../images/Screen+Shot+2013-08-29+at+15.01.39.png\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" height=\"165\" src=\"http://4.bp.blogspot.com/-Y-3I7jvjo8Q/Uh9UYai1xgI/AAAAAAAAAX8/PG_FmYYV0pY/s320/Screen+Shot+2013-08-29+at+15.01.39.png\" width=\"320\"></a></div><br />Double click &#x26;OPEN and add the following option:  COLHEADING=NAMES<br /><br /><div style=\"clear: both; text-align: center;\"><a href=\"../images/Screen+Shot+2013-08-29+at+15.03.19.png\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" height=\"240\" src=\"http://3.bp.blogspot.com/-9Z1-J_q7l4s/Uh9Uyju15QI/AAAAAAAAAYE/YtV0oGYaZxI/s320/Screen+Shot+2013-08-29+at+15.03.19.png\" width=\"320\"></a></div><br /><br />Select “Set Default” and you’re done!<br /><br /></p>","frontmatter":{"title":"Configuring Base SAS to show column NAMES by default (instead of labels)","path":"/configuring-base-sas-to-show-column-names-by-default-instead-of-labels/","previewImg":null,"tags":["SQL"],"date":"Aug 29, 2013"}}}]}},"pageContext":{"page":"category","archives":{"2012":8,"2013":10,"2014":4,"2015":7,"2016":17,"2017":12,"2018":9,"2019":2,"2020":3},"filter":{"frontmatter":{"tags":{"in":["SQL"]}}},"limit":10,"skip":20,"numPages":5,"currentPage":3,"tag":"SQL"}},"staticQueryHashes":[]}