{"componentChunkName":"component---src-templates-template-tsx","path":"/error-the-referenced-entity-has-not-been-defined/","result":{"data":{"site":{"meta":{"title":"Raw SAS - SAS Tips n Tricks","description":"Tips n Tricks and other SAS Titbits from around 10 years of SAS projects and tinkering about with SAS"}},"post":{"id":"e3be04ae-e978-5a6c-bfd0-4b67f750cb1e","html":"<p>I received the following today when uploading a large XML file via proc metadata:</p>\n<pre>ERROR: The referenced entity has not been defined.</pre>\n<p>All my entities had been appropriately escaped (or so I thought):</p>\n<pre>select (instr);\n  when (';') put '&amp;semi;';\n  when ('&amp;') put '&amp;amp;';\n  when ('&lt;') put '&amp;lt;';\n  when ('&gt;') put '&amp;gt;';\n  when (\"'\") put '&amp;apos;';\n  when ('\"') put '&amp;quot;';\n  when ('0A'x) put '&amp;#x0a;';\n  when ('0D'x) put '&amp;#x0d;';\n  when ('</pre>\n<p>Eventually I narrowed it down to this:</p>\n<pre>&lt;UpdateMetadata&gt;\n  &lt;Reposid&gt;$METAREPOSITORY&lt;/Reposid&gt;\n  &lt;Metadata&gt;\n    &lt;TextStore id='A5RIITO4.AG000INH' StoredText='&amp;semi;'&gt;\n    &lt;/TextStore&gt;\n  &lt;/Metadata&gt;\n  &lt;NS&gt;SAS&lt;/NS&gt;\n  &lt;Flags&gt;268435456&lt;/Flags&gt;\n&lt;/UpdateMetadata&gt;\n</pre>\n<p>It seems that the metadata XML parser doesn’t like the HTML <code>&#x26;semi</code> entity reference.  On further investigation it <a href=\"https://stackoverflow.com/a/40942504/66696\">appears</a> that XML does not really support HTML-like named references (like the understandable <code>&#x26;semi</code>) in favour of hex type codes (such as <code>&#x26;#x3b;</code>).  The exception are the following ’<a href=\"http://xmlnews.org/docs/xml-basics.html#references\">main five</a>‘:<a href=\"http://xmlnews.org/docs/xml-basics.html#references\" rel=\"attachment wp-att-410\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; margin-bottom: 1.0725rem;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.1063829787234%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAByUlEQVQoz31SyVLCQBDNp7ucsFhUKMWD60EtPYhYgBUtBANCFiFBiZCQhfAhz+7BpDAuh66ennnz+vUiqX0Vjw+PsEwLlmVhNBpB1zTYto12u43m0xOGgwG63S40TYWmGwmm2WxC6XTR672gQ346dSDVajWU9w+wvraGvf0ycrk8tjIZnJ6e4aZSQbFYQml3Bxm6y+fpLZsnTA7F7W2cEKZQKGBzYwPZrSxq9XtIQRCAzfd9vL+9YzabiTich3BdVyg1h0NMJlOBCQIfYRgmJrDk+Z/jOEtCBs7nc9xVqxiPbQQUR1GEFpV7eXGJ46ND1Bv38AThEs/meZ6IY88mxY+c5fXVoD5Mk5h7qqoqDMMghRNxx5/9X4jjsxQHYRjA0HXxMS6j3+uh1Wqho3RI+fgbYdri+6RkBrMa7hXfcQt4krIs0xT7ItFvRGm1CSF7JnQcd5mACFmxLD9AJ8+tWCwW/5IJwuSBzKayXHcm5EfRgkp9RrV6B16ter1BivUfBKtD+UbIxmP3vs5csmmatNzPQvmAlpsXOk2YHpK0CljtE69NmwZyfXWNi/NzVCq3UBRFJPq3h6sX6ey82KySjRfctj/+HEys9BPAkTwjQIPmaAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Screen Shot 2018 12 09 at 14 43 14 300x181\" title=\"Screen Shot 2018 12 09 at 14 43 14 300x181\" src=\"/tetrahex-rawsas/static/2cdcb7fe5c77245e4d4d68da0422415b/5a46d/Screen-Shot-2018-12-09-at-14.43.14-300x181.png\" srcset=\"/tetrahex-rawsas/static/2cdcb7fe5c77245e4d4d68da0422415b/4dcb9/Screen-Shot-2018-12-09-at-14.43.14-300x181.png 188w,\n/tetrahex-rawsas/static/2cdcb7fe5c77245e4d4d68da0422415b/5a46d/Screen-Shot-2018-12-09-at-14.43.14-300x181.png 300w\" sizes=\"(max-width: 300px) 100vw, 300px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span></a></p>\n<p>The authoritative discussion of named entities for XML is available here, but in summary - if you are looking to escape the content loaded into metadata XML, the following SAS code is preferred:</p>\n<pre>select (instr);\n  when (';') put '&amp;#x3b;';\n  when ('&amp;') put '&amp;amp;';\n  when ('&lt;') put '&amp;lt;';\n  when ('&gt;') put '&amp;gt;';\n  when (\"'\") put '&amp;apos;';\n  when ('\"') put '&amp;quot;';\n  when ('0A'x) put '&amp;#x0a;';\n  when ('0D'x) put '&amp;#x0d;';\n  when ('</pre>\n<p>If you need to update your metadata, you can find a range of useful macros in the MacroPeople <a href=\"https://github.com/macropeople/macrocore\">MacroCore</a> library.</p>\n<pre></pre>","frontmatter":{"title":"ERROR: The referenced entity has not been defined.","path":"/error-the-referenced-entity-has-not-been-defined/","previewImg":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA00lEQVQY02WOy46CQBBF+f9vmo2JCzLiIxN1HHRAHJVng9AIqEmfKYILExc3dbvu6cq1KDPIIuiucM3h0UCZQn0BreCmZYpvK9mVwunBN9XA9L4Qri7g3mH5dkQwPpD4mtUoZetccEcnDpOQ748jrq2IvhL284JomRLMMoKFIt4oAvuEP1XkmxhvfCb2aqzmLoeBs5R05rDzZC6k7O2pVkob2P6CK9n6Bz4dmAqjJWv7/5L3dzqRBfISVaUhSQy5MmTpsHtVrYWphuz4ZwhDgzHv3D9t8jA+JNAzygAAAABJRU5ErkJggg==","aspectRatio":5,"src":"/tetrahex-rawsas/static/6e4cb819fd72e50e164d7871c0fbcb2e/ee604/frontmatter2.png","srcSet":"/tetrahex-rawsas/static/6e4cb819fd72e50e164d7871c0fbcb2e/69585/frontmatter2.png 200w,\n/tetrahex-rawsas/static/6e4cb819fd72e50e164d7871c0fbcb2e/497c6/frontmatter2.png 400w,\n/tetrahex-rawsas/static/6e4cb819fd72e50e164d7871c0fbcb2e/ee604/frontmatter2.png 800w,\n/tetrahex-rawsas/static/6e4cb819fd72e50e164d7871c0fbcb2e/a005f/frontmatter2.png 910w","sizes":"(max-width: 800px) 100vw, 800px"}}},"tags":["metadata","SAS Programming","SAS Web Applications","SAS Web Apps","Stored Process Web Applications","Stored Processes","Web Applications"],"date":"Dec 09, 2018"}}},"pageContext":{"archives":{"2012":8,"2013":10,"2014":4,"2015":7,"2016":17,"2017":12,"2018":9,"2019":2,"2020":3}}},"staticQueryHashes":[]}