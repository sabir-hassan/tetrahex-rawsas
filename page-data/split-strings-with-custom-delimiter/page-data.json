{"componentChunkName":"component---src-templates-template-tsx","path":"/split-strings-with-custom-delimiter/","result":{"data":{"site":{"meta":{"title":"Raw SAS - SAS Tips n Tricks","description":"Tips n Tricks and other SAS Titbits from around 10 years of SAS projects and tinkering about with SAS"}},"post":{"id":"b7737c09-5c61-570b-8bfb-0655bc5eee4a","html":"<p>I recently had a challenge - how to delimit an array of character data, when the delimiter itself may be in the data?  Furthermore, when that array has to fit in a SAS macro variable?</p>\n<p>I was aware of nonprintables (hidden gremlins that can sometimes lurk in SAS program files), and attempted to use one as a delimiter.  To my surprise this didn’t work, and it turned out that SAS does not<a href=\"http://morgan.dartmouth.edu/Docs/sas92/support.sas.com/documentation/cdl/en/mcrolref/61885/HTML/default/getstart.htm\"> fully support</a> nonprintables in Macro.  So, I turned to <a href=\"/tetrahex-rawsas/sas-l-is-still-alive\">SAS-L</a> for help.</p>\n<h3>heLp!</h3>\nThere were two interesting things that came of that conversation, both from <a href=\"https://communities.sas.com/t5/user/viewprofilepage/user-id/19924\">FriedEgg</a>.  Firstly, the nonprintables ARE stored in the symbol table - they just fail to resolve.  However, they can be viewed by reading directly from sashelp.vmacro.\n<p>Secondly - a defined range of 6400 unicode characters already exist for ‘private use’ such as this!  They are known as “Private Use Characters” (or “User Defined Characters”) and exist in the range U+E000 -> U+F8FF.  The full spec is available <a href=\"http://www.unicode.org/versions/Unicode10.0.0/ch23.pdf#G19184\">here</a>.  To implement something like this in SAS, one uses hexadecimal notation - a quoted string with an even number of hex characters, followed by the letter x.</p>\n<h3>Here be dragons..</h3>\nWatch out!!  As pointed out by <a href=\"https://www.linkedin.com/in/xlr82sas/\">Roger DeAngelis</a> on the same thread, when dealing with hex data in datastep one has to watch out for a common binary delimeter - '00'x.  This can cause unexpected results when delimiting missing values.  So - you should basically avoid any hex value that has a double 0 (such as 'E000'x).  Use delimiters such as 'E042'x or 'E999'x instead.  So - here is how one might go about the delimiting task:\n<pre>data _null_;\n  dlm='E042'x;\n  call symputx('macarray','special!!'!!dlm!!'*,xx');\nrun;\n%put &amp;macarray;\nfilename tmp temp;\ndata _null_;\n  file tmp;\n  length myvar $32767;\n  myvar=symget('macarray');\n  put myvar;\nrun;\ndata _null_;\n infile tmp;\n input;\n put _infile_;\nrun;\n</pre>\nWhich printed (in both instances):\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 244px; margin-bottom: 1.0725rem;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 18.085106382978726%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuUlEQVQY04WQOwqDYBCEPZnH8GoiEdHWSqysTFAEUUzjGxsFRbDwAIJ+IX9CIAkhA8vOPphhV+IPtm376i3L8uL7vr/NpCAIaJqGLMuI45iiKKjrWkSe51RVRd/3dF3HOI6oqoosy9i2TRRFQmQYBpIkIU1TJE3TxNI9m6aJ4zhC2HVdLMvicjlzvWbCqCxLPM9DURTCMGSaJtq2xfd9DENH109Id4d5nn+e/HGRwHEcL76u6/M1j/oGpTYfTzDs/tEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Screen Shot 2017 10 10 at 20 34 07\" title=\"Screen Shot 2017 10 10 at 20 34 07\" src=\"/tetrahex-rawsas/static/2949f58acc8d2c53ca873b16ce7b7178/0cba8/Screen-Shot-2017-10-10-at-20.34.07.png\" srcset=\"/tetrahex-rawsas/static/2949f58acc8d2c53ca873b16ce7b7178/4dcb9/Screen-Shot-2017-10-10-at-20.34.07.png 188w,\n/tetrahex-rawsas/static/2949f58acc8d2c53ca873b16ce7b7178/0cba8/Screen-Shot-2017-10-10-at-20.34.07.png 244w\" sizes=\"(max-width: 244px) 100vw, 244px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n    </span>\n<p>Job done!</p>\n<p><em>One of the great things about the vastness of SAS is the never ending supply of problems to solve!  How do you think you compare?   Find out - at <a href=\"https://sasensei.com\">sasensei.com</a></em></p>","frontmatter":{"title":"Split Character Data With Private Use Delimiters","path":"/split-strings-with-custom-delimiter/","previewImg":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAt0lEQVQY032QzQpEABSFPZnH8GrSaGJrJSsrMyUlYuM/G4qUBTsLxTeNJrOYn1unTvfczu0cgT+zruvHbhzHk2/b9qELZVkSRRG+75OmKUVRHEiShDzPaZqGuq7pug5ZlhFFEcMw8DzvMGjbliAICMOQZVkQnkeKoqBpGqZpHsaWZaHrOvf7jTiOjkdZlmHbNpIk4boufd9TVRWO43C9qqjqhXmeEYZh+Bn5SyL2fT/5NE2vat76A3lFIO2RLKfMAAAAAElFTkSuQmCC","aspectRatio":5.555555555555555,"src":"/tetrahex-rawsas/static/2949f58acc8d2c53ca873b16ce7b7178/b149c/frontmatter9.png","srcSet":"/tetrahex-rawsas/static/2949f58acc8d2c53ca873b16ce7b7178/69585/frontmatter9.png 200w,\n/tetrahex-rawsas/static/2949f58acc8d2c53ca873b16ce7b7178/b149c/frontmatter9.png 244w","sizes":"(max-width: 244px) 100vw, 244px"}}},"tags":["Programming","Stored Process Web Applications","Web Applications"],"date":"Oct 10, 2017"}}},"pageContext":{"archives":{"2012":8,"2013":10,"2014":4,"2015":7,"2016":17,"2017":12,"2018":9,"2019":2,"2020":3}}},"staticQueryHashes":[]}